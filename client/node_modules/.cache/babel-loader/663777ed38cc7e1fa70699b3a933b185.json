{"ast":null,"code":"import axios from'axios';var API=axios.create({baseURL:'http://localhost:5000'});//指向后端路由的url\n//旧 const url='http://localhost:5000/posts';\n//字如其名，axios.interceptors拦截器用于一是请求拦截，二是返回拦截。\n//用token验证是否logged in\nAPI.interceptors.request.use(function(req){if(localStorage.getItem('profile')){console.log(\"interceptors判断profile localStorage\");//把token加入每个request请求中\nreq.headers.Authorization=\"Bearer \".concat(JSON.parse(localStorage.getItem('profile')).token);}//后端会接收到一个特别的header\nreturn req;});export var fetchPosts=function fetchPosts(){return API.get('/posts');};//把数据通过api发送给后端\nexport var createPost=function createPost(newPost){return API.post('/posts',newPost);};//更新数据\nexport var updatePost=function updatePost(id,updatedPost){return API.patch('/posts'.concat(\"/\",id),updatedPost);};//删除帖子\nexport var delelte=function delelte(id){return API.delete('/posts'.concat(\"/\",id));};//点赞加1\nexport var likePost=function likePost(id){return API.patch('/posts'.concat(\"/\",id,\"/likePost\"));};export var signIn=function signIn(formData){return API.post('/user/signin',formData);};export var signUp=function signUp(formData){return API.post('/user/signup',formData);};","map":{"version":3,"names":["axios","API","create","baseURL","interceptors","request","use","req","localStorage","getItem","console","log","headers","Authorization","JSON","parse","token","fetchPosts","get","createPost","newPost","post","updatePost","id","updatedPost","patch","delelte","delete","likePost","signIn","formData","signUp"],"sources":["E:/Learn/FullStack/client/src/api/index.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API=axios.create({baseURL:'http://localhost:5000'})\r\n//指向后端路由的url\r\n//旧 const url='http://localhost:5000/posts';\r\n\r\n\r\n\r\n//字如其名，axios.interceptors拦截器用于一是请求拦截，二是返回拦截。\r\n//用token验证是否logged in\r\nAPI.interceptors.request.use((req)=>{\r\n    \r\n    if(localStorage.getItem('profile')){\r\n        console.log(\"interceptors判断profile localStorage\")\r\n        //把token加入每个request请求中\r\n        req.headers.Authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n        //后端会接收到一个特别的header\r\n    return req\r\n})\r\n\r\nexport const fetchPosts=() => API.get('/posts');\r\n\r\n//把数据通过api发送给后端\r\nexport const createPost=(newPost)=>API.post('/posts',newPost);\r\n//更新数据\r\nexport const updatePost = (id, updatedPost) => API.patch(`${'/posts'}/${id}`, updatedPost);\r\n//删除帖子\r\nexport const delelte =(id)=>API.delete(`${'/posts'}/${id}`);\r\n//点赞加1\r\nexport const likePost=(id)=>API.patch(`${'/posts'}/${id}/likePost`);\r\n\r\n\r\nexport const signIn = (formData) => API.post('/user/signin', formData);\r\nexport const signUp = (formData) => API.post('/user/signup', formData);"],"mappings":"AAAA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,GAAMC,IAAG,CAACD,KAAK,CAACE,MAAN,CAAa,CAACC,OAAO,CAAC,uBAAT,CAAb,CAAV,CACA;AACA;AAIA;AACA;AACAF,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA6B,SAACC,GAAD,CAAO,CAEhC,GAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,CAAmC,CAC/BC,OAAO,CAACC,GAAR,CAAY,oCAAZ,EACA;AACAJ,GAAG,CAACK,OAAJ,CAAYC,aAAZ,kBAAoCC,IAAI,CAACC,KAAL,CAAWP,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CO,KAAhF,EACH,CACG;AACJ,MAAOT,IAAP,CACH,CATD,EAWA,MAAO,IAAMU,WAAU,CAAC,QAAXA,WAAW,SAAMhB,IAAG,CAACiB,GAAJ,CAAQ,QAAR,CAAN,EAAjB,CAEP;AACA,MAAO,IAAMC,WAAU,CAAC,QAAXA,WAAW,CAACC,OAAD,QAAWnB,IAAG,CAACoB,IAAJ,CAAS,QAAT,CAAkBD,OAAlB,CAAX,EAAjB,CACP;AACA,MAAO,IAAME,WAAU,CAAG,QAAbA,WAAa,CAACC,EAAD,CAAKC,WAAL,QAAqBvB,IAAG,CAACwB,KAAJ,CAAa,QAAb,YAAyBF,EAAzB,EAA+BC,WAA/B,CAArB,EAAnB,CACP;AACA,MAAO,IAAME,QAAO,CAAE,QAATA,QAAS,CAACH,EAAD,QAAMtB,IAAG,CAAC0B,MAAJ,CAAc,QAAd,YAA0BJ,EAA1B,EAAN,EAAf,CACP;AACA,MAAO,IAAMK,SAAQ,CAAC,QAATA,SAAS,CAACL,EAAD,QAAMtB,IAAG,CAACwB,KAAJ,CAAa,QAAb,YAAyBF,EAAzB,cAAN,EAAf,CAGP,MAAO,IAAMM,OAAM,CAAG,QAATA,OAAS,CAACC,QAAD,QAAc7B,IAAG,CAACoB,IAAJ,CAAS,cAAT,CAAyBS,QAAzB,CAAd,EAAf,CACP,MAAO,IAAMC,OAAM,CAAG,QAATA,OAAS,CAACD,QAAD,QAAc7B,IAAG,CAACoB,IAAJ,CAAS,cAAT,CAAyBS,QAAzB,CAAd,EAAf"},"metadata":{},"sourceType":"module"}