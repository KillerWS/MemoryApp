{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: 'http://localhost:5000'\n}); //指向后端路由的url\n//旧 const url='http://localhost:5000/posts';\n//字如其名，axios.interceptors拦截器用于一是请求拦截，二是返回拦截。\n//用token验证是否logged in\n\nAPI.interceptors.request.use(req => {\n  if (localStorage.getItem('profile')) {\n    console.log(\"interceptors判断profile localStorage\"); //把token加入每个request请求中\n\n    req.headers.Authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n  } //后端会接收到一个特别的header\n\n\n  return req;\n});\nexport const fetchPosts = () => API.get('/posts'); //把数据通过api发送给后端\n\nexport const createPost = newPost => API.post('/posts', newPost); //更新数据\n\nexport const updatePost = (id, updatedPost) => API.patch(`${'/posts'}/${id}`, updatedPost); //删除帖子\n\nexport const delelte = id => API.delete(`${'/posts'}/${id}`); //点赞加1\n\nexport const likePost = id => API.patch(`${'/posts'}/${id}/likePost`);\nexport const signIn = formData => API.post('/user/signin', formData);\nexport const signUp = formData => API.post('/user/signup', formData);","map":{"version":3,"names":["axios","API","create","baseURL","interceptors","request","use","req","localStorage","getItem","console","log","headers","Authorization","JSON","parse","token","fetchPosts","get","createPost","newPost","post","updatePost","id","updatedPost","patch","delelte","delete","likePost","signIn","formData","signUp"],"sources":["E:/Learn/FullStack/client/src/api/index.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API=axios.create({baseURL:'http://localhost:5000'})\r\n//指向后端路由的url\r\n//旧 const url='http://localhost:5000/posts';\r\n\r\n\r\n\r\n//字如其名，axios.interceptors拦截器用于一是请求拦截，二是返回拦截。\r\n//用token验证是否logged in\r\nAPI.interceptors.request.use((req)=>{\r\n    \r\n    if(localStorage.getItem('profile')){\r\n        console.log(\"interceptors判断profile localStorage\")\r\n        //把token加入每个request请求中\r\n        req.headers.Authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n        //后端会接收到一个特别的header\r\n    return req\r\n})\r\n\r\nexport const fetchPosts=() => API.get('/posts');\r\n\r\n//把数据通过api发送给后端\r\nexport const createPost=(newPost)=>API.post('/posts',newPost);\r\n//更新数据\r\nexport const updatePost = (id, updatedPost) => API.patch(`${'/posts'}/${id}`, updatedPost);\r\n//删除帖子\r\nexport const delelte =(id)=>API.delete(`${'/posts'}/${id}`);\r\n//点赞加1\r\nexport const likePost=(id)=>API.patch(`${'/posts'}/${id}/likePost`);\r\n\r\n\r\nexport const signIn = (formData) => API.post('/user/signin', formData);\r\nexport const signUp = (formData) => API.post('/user/signup', formData);"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,GAAG,GAACD,KAAK,CAACE,MAAN,CAAa;EAACC,OAAO,EAAC;AAAT,CAAb,CAAV,C,CACA;AACA;AAIA;AACA;;AACAF,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;EAEhC,IAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;IAC/BC,OAAO,CAACC,GAAR,CAAY,oCAAZ,EAD+B,CAE/B;;IACAJ,GAAG,CAACK,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWP,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CO,KAAM,EAAtF;EACH,CAN+B,CAO5B;;;EACJ,OAAOT,GAAP;AACH,CATD;AAWA,OAAO,MAAMU,UAAU,GAAC,MAAMhB,GAAG,CAACiB,GAAJ,CAAQ,QAAR,CAAvB,C,CAEP;;AACA,OAAO,MAAMC,UAAU,GAAEC,OAAD,IAAWnB,GAAG,CAACoB,IAAJ,CAAS,QAAT,EAAkBD,OAAlB,CAA5B,C,CACP;;AACA,OAAO,MAAME,UAAU,GAAG,CAACC,EAAD,EAAKC,WAAL,KAAqBvB,GAAG,CAACwB,KAAJ,CAAW,GAAE,QAAS,IAAGF,EAAG,EAA5B,EAA+BC,WAA/B,CAAxC,C,CACP;;AACA,OAAO,MAAME,OAAO,GAAGH,EAAD,IAAMtB,GAAG,CAAC0B,MAAJ,CAAY,GAAE,QAAS,IAAGJ,EAAG,EAA7B,CAArB,C,CACP;;AACA,OAAO,MAAMK,QAAQ,GAAEL,EAAD,IAAMtB,GAAG,CAACwB,KAAJ,CAAW,GAAE,QAAS,IAAGF,EAAG,WAA5B,CAArB;AAGP,OAAO,MAAMM,MAAM,GAAIC,QAAD,IAAc7B,GAAG,CAACoB,IAAJ,CAAS,cAAT,EAAyBS,QAAzB,CAA7B;AACP,OAAO,MAAMC,MAAM,GAAID,QAAD,IAAc7B,GAAG,CAACoB,IAAJ,CAAS,cAAT,EAAyBS,QAAzB,CAA7B"},"metadata":{},"sourceType":"module"}