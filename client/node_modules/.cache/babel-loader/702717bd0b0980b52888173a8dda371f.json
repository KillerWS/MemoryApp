{"ast":null,"code":"import { FETCH_ALL, CREATE, UPDATE, DELETE, LIKE } from '../constants/actionTypes'; //state可以指定为空初始化（缺省值）\n//因为state要被转换为posts，所以直接全写成posts\n// export default (state=[],action) => {\n//     ...\n//     ...\n// }\n//reducer函数不用直接使用，它会在dispatch函数中调用!!!\n// reducer接受state和action并返回新的state\n\nexport default (function () {\n  let posts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case FETCH_ALL:\n      return action.payload;\n\n    case CREATE:\n      return [...posts, action.payload];\n\n    case UPDATE:\n    case LIKE:\n      console.log(\"Post info:\" + posts);\n      return posts.map(post => post._id === action.payload._id ? action.payload : post);\n\n    case DELETE:\n      return posts.filter(post => post._id !== action.payload);\n\n    default:\n      return posts;\n  }\n});","map":{"version":3,"names":["FETCH_ALL","CREATE","UPDATE","DELETE","LIKE","posts","action","type","payload","console","log","map","post","_id","filter"],"sources":["E:/Learn/FullStack/client/src/reducers/posts.js"],"sourcesContent":["import { FETCH_ALL, CREATE, UPDATE, DELETE, LIKE } from '../constants/actionTypes';\r\n//state可以指定为空初始化（缺省值）\r\n//因为state要被转换为posts，所以直接全写成posts\r\n// export default (state=[],action) => {\r\n//     ...\r\n//     ...\r\n// }\r\n\r\n\r\n//reducer函数不用直接使用，它会在dispatch函数中调用!!!\r\n// reducer接受state和action并返回新的state\r\n\r\nexport default (posts =[], action) => {\r\n    switch (action.type) {\r\n      case FETCH_ALL:\r\n        return action.payload;\r\n      case CREATE:\r\n        return [...posts, action.payload];\r\n      case UPDATE:\r\n      case LIKE:\r\n        console.log(\"Post info:\"+posts)\r\n        return posts.map((post) => (post._id === action.payload._id ? action.payload : post));\r\n      case DELETE:\r\n        return posts.filter((post)=>post._id !== action.payload );    \r\n      default:\r\n        return posts;\r\n    }\r\n  };"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,MAA5B,EAAoCC,MAApC,EAA4CC,IAA5C,QAAwD,0BAAxD,C,CACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;;AAEA,gBAAe,YAAuB;EAAA,IAAtBC,KAAsB,uEAAf,EAAe;EAAA,IAAXC,MAAW;;EAClC,QAAQA,MAAM,CAACC,IAAf;IACE,KAAKP,SAAL;MACE,OAAOM,MAAM,CAACE,OAAd;;IACF,KAAKP,MAAL;MACE,OAAO,CAAC,GAAGI,KAAJ,EAAWC,MAAM,CAACE,OAAlB,CAAP;;IACF,KAAKN,MAAL;IACA,KAAKE,IAAL;MACEK,OAAO,CAACC,GAAR,CAAY,eAAaL,KAAzB;MACA,OAAOA,KAAK,CAACM,GAAN,CAAWC,IAAD,IAAWA,IAAI,CAACC,GAAL,KAAaP,MAAM,CAACE,OAAP,CAAeK,GAA5B,GAAkCP,MAAM,CAACE,OAAzC,GAAmDI,IAAxE,CAAP;;IACF,KAAKT,MAAL;MACE,OAAOE,KAAK,CAACS,MAAN,CAAcF,IAAD,IAAQA,IAAI,CAACC,GAAL,KAAaP,MAAM,CAACE,OAAzC,CAAP;;IACF;MACE,OAAOH,KAAP;EAZJ;AAcD,CAfH"},"metadata":{},"sourceType":"module"}